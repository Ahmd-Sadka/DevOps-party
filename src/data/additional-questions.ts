import { Question } from '@/types/game';

const wrongFeedbackPool = [
  "Oops! That would definitely page the on-call team at 3 AM ðŸ˜…",
  "Nice try! But production would be crying right now ðŸ˜­",
  "Close! But that's how you get a Slack message at dinner ðŸ",
  "Hmm, that's how incidents start... ðŸš¨",
  "Your future self would debug this for hours ðŸ•",
  "That's a spicy way to break things! ðŸŒ¶ï¸",
  "Production would like to have a word with you ðŸ’¬",
  "Stack Overflow would judge you for this one ðŸ‘€",
  "kubectl get fired --reason=this-answer ðŸ’€",
  "git blame would point directly at you right now ðŸ«µ",
  "That's a resume-generating event right there ðŸ“„",
  "Your Kubernetes cluster just rage-quit ðŸƒ",
  "docker rm --force your-confidence ðŸ³",
  "The monitoring dashboard just turned entirely red ðŸ”´",
  "That answer has 'works on my machine' energy ðŸ’»",
];

const getRandomWrongFeedback = (): string[] => {
  const shuffled = [...wrongFeedbackPool].sort(() => 0.5 - Math.random());
  return shuffled.slice(0, 3);
};

export const additionalLinuxQuestions: Question[] = [
  {
    id: 'linux-21',
    levelId: 'linux',
    difficulty: 'medium',
    question: 'What does the command "lsof -i :80" show?',
    options: [
      'Shows processes using port 80',
      'Lists files with 80 in the name',
      'Lists the 80 largest system files',
      'Shows the 80 most recent files',
    ],
    correctAnswer: 0,
    explanation: 'lsof with -i :80 shows all processes that have port 80 open.',
    wrongFeedback: getRandomWrongFeedback(),
    xpReward: 20,
    tags: ['networking', 'processes', 'intermediate'],
  },
  {
    id: 'linux-22',
    levelId: 'linux',
    difficulty: 'hard',
    question: 'What is the purpose of the /proc filesystem?',
    options: [
      'Stores procedure documentation files',
      'Contains processor configuration files',
      'Backup location for critical system files',
      'Virtual FS exposing kernel and process info',
    ],
    correctAnswer: 3,
    explanation: '/proc is a virtual filesystem providing information about running processes and kernel parameters.',
    wrongFeedback: getRandomWrongFeedback(),
    xpReward: 35,
    tags: ['filesystem', 'kernel', 'advanced'],
  },
  {
    id: 'linux-23',
    levelId: 'linux',
    difficulty: 'medium',
    question: 'How do you check disk usage of the current directory?',
    options: [
      'df . (filesystem stats)',
      'disk --usage . (disk util)',
      'du -sh . (directory usage)',
      'ls --size . (list sizes)',
    ],
    correctAnswer: 2,
    explanation: 'du -sh . shows disk usage summary in human-readable format for the current directory.',
    wrongFeedback: getRandomWrongFeedback(),
    xpReward: 20,
    tags: ['disk', 'commands', 'intermediate'],
  },
  {
    id: 'linux-24',
    levelId: 'linux',
    difficulty: 'hard',
    question: 'What does "nohup command &" accomplish?',
    options: [
      'Runs command with no output at all',
      'Background process immune to hangup signals',
      'Runs command with elevated root privileges',
      'Runs command without network access',
    ],
    correctAnswer: 1,
    explanation: 'nohup prevents SIGHUP when terminal closes, & runs it in background.',
    wrongFeedback: getRandomWrongFeedback(),
    xpReward: 35,
    tags: ['processes', 'signals', 'advanced'],
  },
  {
    id: 'linux-25',
    levelId: 'linux',
    difficulty: 'evil',
    question: 'Server at 100% CPU. How to find the culprit and its children?',
    options: [
      'top (shows live processes only)',
      'ps aux --sort=-%cpu && pstree -p <pid>',
      'htop (interactive viewer only)',
      'cat /proc/cpuinfo (hardware info)',
    ],
    correctAnswer: 1,
    explanation: 'ps aux sorted by CPU shows top consumers, pstree shows the process tree.',
    wrongFeedback: getRandomWrongFeedback(),
    xpReward: 50,
    tags: ['troubleshooting', 'processes', 'evil'],
  },
];

export const additionalBashQuestions: Question[] = [
  {
    id: 'bash-21',
    levelId: 'bash',
    difficulty: 'medium',
    question: 'What does "set -o pipefail" do?',
    options: [
      'Makes pipe operations execute faster',
      'Returns exit status of first failed pipe command',
      'Prevents pipes from being used entirely',
      'Logs all pipe operations to syslog',
    ],
    correctAnswer: 1,
    explanation: 'Without pipefail, a pipeline returns the last command\'s status. With pipefail, it returns the first failed command\'s status.',
    wrongFeedback: getRandomWrongFeedback(),
    xpReward: 20,
    tags: ['error-handling', 'pipes', 'intermediate'],
  },
  {
    id: 'bash-22',
    levelId: 'bash',
    difficulty: 'hard',
    question: 'What is the difference between $@ and $* in Bash?',
    options: [
      'No difference at all between them',
      '$@ preserves separate args, $* joins them',
      '$@ is for arrays, $* is for strings only',
      '$* is deprecated and should not be used',
    ],
    correctAnswer: 1,
    explanation: '"$@" expands each argument separately, "$*" combines all into a single string.',
    wrongFeedback: getRandomWrongFeedback(),
    xpReward: 35,
    tags: ['arguments', 'variables', 'advanced'],
  },
  {
    id: 'bash-23',
    levelId: 'bash',
    difficulty: 'medium',
    question: 'How do you read a file line by line in Bash?',
    options: [
      'for line in file.txt; do echo $line; done',
      'while IFS= read -r line; do ... done < file',
      'cat file.txt | foreach line echo $line',
      'read file.txt line by line command',
    ],
    correctAnswer: 1,
    explanation: 'while read with IFS= preserves whitespace and -r prevents backslash interpretation.',
    wrongFeedback: getRandomWrongFeedback(),
    xpReward: 20,
    tags: ['files', 'loops', 'intermediate'],
  },
  {
    id: 'bash-24',
    levelId: 'bash',
    difficulty: 'hard',
    question: 'What does "trap cleanup EXIT" do?',
    options: [
      'Catches syntax errors in scripts',
      'Runs cleanup function when script exits',
      'Prevents the script from ever exiting',
      'Logs all exit attempts to a file',
    ],
    correctAnswer: 1,
    explanation: 'trap runs commands on signals. EXIT runs the command when the script exits for any reason.',
    wrongFeedback: getRandomWrongFeedback(),
    xpReward: 35,
    tags: ['signals', 'cleanup', 'advanced'],
  },
  {
    id: 'bash-25',
    levelId: 'bash',
    difficulty: 'evil',
    question: '"Argument list too long" with 100k files. How to fix rm /logs/*.log?',
    options: [
      'Use rm -f flag instead of rm',
      'Use find with -delete or xargs rm',
      'Increase ulimit -s on the shell',
      'Split files into smaller directories',
    ],
    correctAnswer: 1,
    explanation: 'When glob expansion exceeds ARG_MAX, use find with -delete or xargs to process in batches.',
    wrongFeedback: getRandomWrongFeedback(),
    xpReward: 50,
    tags: ['limits', 'troubleshooting', 'evil'],
  },
];

export const additionalGitQuestions: Question[] = [
  {
    id: 'git-21',
    levelId: 'git',
    difficulty: 'medium',
    question: 'What does "git stash" do?',
    options: [
      'Permanently deletes uncommitted changes',
      'Temporarily saves uncommitted changes',
      'Creates a new branch from changes',
      'Commits changes with default message',
    ],
    correctAnswer: 1,
    explanation: 'git stash temporarily saves changes so you can switch branches, then apply them later with git stash pop.',
    wrongFeedback: getRandomWrongFeedback(),
    xpReward: 20,
    tags: ['stash', 'workflow', 'intermediate'],
  },
  {
    id: 'git-22',
    levelId: 'git',
    difficulty: 'hard',
    question: 'How do you undo the last commit but keep changes?',
    options: [
      'git reset --hard HEAD~1',
      'git reset --soft HEAD~1',
      'git revert HEAD (creates new commit)',
      'git undo (not a real command)',
    ],
    correctAnswer: 1,
    explanation: '--soft keeps changes staged, --mixed unstages them, --hard discards them.',
    wrongFeedback: getRandomWrongFeedback(),
    xpReward: 35,
    tags: ['reset', 'undo', 'advanced'],
  },
  {
    id: 'git-23',
    levelId: 'git',
    difficulty: 'medium',
    question: 'What is the purpose of .gitignore?',
    options: [
      'Lists ignored commits from history',
      'Specifies untracked file patterns',
      'Ignores merge conflicts silently',
      'Skips certain branches from push',
    ],
    correctAnswer: 1,
    explanation: '.gitignore tells Git which files/directories to exclude from version control.',
    wrongFeedback: getRandomWrongFeedback(),
    xpReward: 20,
    tags: ['config', 'basics', 'intermediate'],
  },
  {
    id: 'git-24',
    levelId: 'git',
    difficulty: 'hard',
    question: 'What does "git bisect" help you do?',
    options: [
      'Split a repository in half',
      'Binary search to find buggy commit',
      'Divide branches into equal parts',
      'Compare two files side by side',
    ],
    correctAnswer: 1,
    explanation: 'git bisect uses binary search through commit history to find which commit introduced a bug.',
    wrongFeedback: getRandomWrongFeedback(),
    xpReward: 35,
    tags: ['debugging', 'history', 'advanced'],
  },
  {
    id: 'git-25',
    levelId: 'git',
    difficulty: 'evil',
    question: 'Pushed secrets to a public repo. How to fully remove?',
    options: [
      'Delete the file and push a new commit',
      'Rewrite history with BFG, force push, rotate keys',
      'Make the repo private to hide it',
      'Create a new commit removing the secrets file',
    ],
    correctAnswer: 1,
    explanation: 'Secrets remain in history! Rewrite with BFG/filter-branch, force push, AND rotate leaked credentials.',
    wrongFeedback: getRandomWrongFeedback(),
    xpReward: 50,
    tags: ['security', 'history', 'evil'],
  },
];

export const additionalDockerQuestions: Question[] = [
  {
    id: 'docker-21',
    levelId: 'docker',
    difficulty: 'medium',
    question: 'What is a Docker layer?',
    options: [
      'A security level in Docker networking',
      'A read-only filesystem in an image',
      'A network configuration template file',
      'A container priority level setting',
    ],
    correctAnswer: 1,
    explanation: 'Docker images consist of layers, each representing a Dockerfile instruction. Layers are cached and reused.',
    wrongFeedback: getRandomWrongFeedback(),
    xpReward: 20,
    tags: ['images', 'layers', 'intermediate'],
  },
  {
    id: 'docker-22',
    levelId: 'docker',
    difficulty: 'hard',
    question: 'What is the difference between ENTRYPOINT and CMD?',
    options: [
      'They are identical instructions in Docker',
      'ENTRYPOINT is main command; CMD gives defaults',
      'CMD runs first, then ENTRYPOINT executes',
      'ENTRYPOINT is deprecated in newer Docker',
    ],
    correctAnswer: 1,
    explanation: 'ENTRYPOINT sets the main executable. CMD provides default arguments that can be overridden.',
    wrongFeedback: getRandomWrongFeedback(),
    xpReward: 35,
    tags: ['dockerfile', 'commands', 'advanced'],
  },
  {
    id: 'docker-23',
    levelId: 'docker',
    difficulty: 'medium',
    question: 'How do you limit a container to 512MB memory?',
    options: [
      'docker run --ram 512m my-image',
      'docker run --memory 512m my-image',
      'docker run --max-mem 512m my-image',
      'docker run --limit-memory 512m image',
    ],
    correctAnswer: 1,
    explanation: '--memory (or -m) limits container memory. You can also set --memory-swap.',
    wrongFeedback: getRandomWrongFeedback(),
    xpReward: 20,
    tags: ['resources', 'limits', 'intermediate'],
  },
  {
    id: 'docker-24',
    levelId: 'docker',
    difficulty: 'hard',
    question: 'What is the purpose of Docker health checks?',
    options: [
      'To check Docker daemon health status',
      'To verify container app is truly healthy',
      'To monitor host disk usage over time',
      'To check network connectivity to Docker Hub',
    ],
    correctAnswer: 1,
    explanation: 'HEALTHCHECK lets Docker periodically verify the container application is healthy, not just running.',
    wrongFeedback: getRandomWrongFeedback(),
    xpReward: 35,
    tags: ['healthcheck', 'monitoring', 'advanced'],
  },
  {
    id: 'docker-25',
    levelId: 'docker',
    difficulty: 'evil',
    question: 'Docker image is 2GB. How to reduce significantly?',
    options: [
      'Use COMPRESS instruction in Dockerfile',
      'Multi-stage builds, alpine, minimize layers',
      'Use the docker compact CLI command',
      'Split into multiple smaller separate images',
    ],
    correctAnswer: 1,
    explanation: 'Multi-stage builds copy only needed artifacts, alpine is ~5MB, clean up in same layer prevents bloat.',
    wrongFeedback: getRandomWrongFeedback(),
    xpReward: 50,
    tags: ['optimization', 'images', 'evil'],
  },
];

export const additionalDevOpsQuestions: Question[] = [
  {
    id: 'devops-21',
    levelId: 'devops',
    difficulty: 'medium',
    question: 'What is GitOps?',
    options: [
      'Using Git for source code only',
      'Git as source of truth for infra and apps',
      'A Git hosting platform service',
      'Git operations automation tooling',
    ],
    correctAnswer: 1,
    explanation: 'GitOps uses Git repos as the source of truth for infrastructure. Changes via PRs are auto-synced.',
    wrongFeedback: getRandomWrongFeedback(),
    xpReward: 20,
    tags: ['gitops', 'practices', 'intermediate'],
  },
  {
    id: 'devops-22',
    levelId: 'devops',
    difficulty: 'hard',
    question: 'What is the purpose of a service mesh?',
    options: [
      'Physical network cable management system',
      'Service-to-service traffic, security, observability',
      'Database connection pooling management',
      'Load balancer configuration automation',
    ],
    correctAnswer: 1,
    explanation: 'Service meshes (Istio, Linkerd) handle microservices networking: mTLS, traffic routing, tracing.',
    wrongFeedback: getRandomWrongFeedback(),
    xpReward: 35,
    tags: ['microservices', 'networking', 'advanced'],
  },
  {
    id: 'devops-23',
    levelId: 'devops',
    difficulty: 'medium',
    question: 'What does "shift left" mean in DevOps?',
    options: [
      'Move servers to a different cloud region',
      'Test and secure earlier in development cycle',
      'Decrease overall development cycle time',
      'Left-align code formatting in IDE settings',
    ],
    correctAnswer: 1,
    explanation: 'Shift left: address testing and security earlier rather than waiting until deployment.',
    wrongFeedback: getRandomWrongFeedback(),
    xpReward: 20,
    tags: ['practices', 'culture', 'intermediate'],
  },
  {
    id: 'devops-24',
    levelId: 'devops',
    difficulty: 'hard',
    question: 'What is chaos engineering (e.g. Chaos Monkey)?',
    options: [
      'Creating random bugs in production code',
      'Terminate instances to test system resilience',
      'Generating synthetic test data for staging',
      'Simulating high traffic load on servers',
    ],
    correctAnswer: 1,
    explanation: 'Chaos engineering intentionally introduces failures to verify systems can withstand turbulent conditions.',
    wrongFeedback: getRandomWrongFeedback(),
    xpReward: 35,
    tags: ['chaos', 'resilience', 'advanced'],
  },
  {
    id: 'devops-25',
    levelId: 'devops',
    difficulty: 'evil',
    question: 'Design zero-downtime deployment for stateful app with DB?',
    options: [
      'Blue-green deployment strategy only',
      'Rolling deploy + backward-compatible DB migrations',
      'Stop all traffic, deploy, then restart services',
      'Use read replicas only, no write changes',
    ],
    correctAnswer: 1,
    explanation: 'Stateful apps need expand-contract DB migrations, feature flags, rolling updates, and canary validation.',
    wrongFeedback: getRandomWrongFeedback(),
    xpReward: 50,
    tags: ['deployment', 'interview', 'evil'],
  },
];