import { Question } from '@/types/game';

const wrongFeedbackPool = [
  "Oops! That would definitely page the on-call team at 3 AM ðŸ˜…",
  "Nice try! But production would be crying right now ðŸ˜­",
  "Close! But that's how you get a Slack message at dinner ðŸ",
  "Hmm, that's how incidents start... ðŸš¨",
  "Your future self would debug this for hours ðŸ•",
  "That's a spicy way to break things! ðŸŒ¶ï¸",
  "Production would like to have a word with you ðŸ’¬",
  "Stack Overflow would judge you for this one ðŸ‘€",
  "Ansible would mark that as 'fatal' in bright red ðŸ”´",
  "That answer just failed idempotency check ðŸ”„",
  "The playbook for your career just got a syntax error ðŸ“",
  "That's the kind of answer that makes YAML cry ðŸ˜¢",
  "Even the inventory file is judging you right now ðŸ“‹",
];

const getRandomWrongFeedback = (): string[] => {
  const shuffled = [...wrongFeedbackPool].sort(() => 0.5 - Math.random());
  return shuffled.slice(0, 3);
};

export const ansibleQuestions: Question[] = [
  {
    id: 'ansible-1',
    levelId: 'ansible',
    difficulty: 'easy',
    question: 'What is Ansible primarily used for?',
    options: [
      'Configuration management and automation',
      'Container orchestration platform',
      'Source code compilation tools',
      'Database management systems',
    ],
    correctAnswer: 0,
    explanation: 'Ansible is an open-source tool for configuration management, application deployment, and task automation.',
    wrongFeedback: getRandomWrongFeedback(),
    xpReward: 10,
    tags: ['basics', 'concepts', 'fundamentals'],
  },
  {
    id: 'ansible-2',
    levelId: 'ansible',
    difficulty: 'easy',
    question: 'What language are Ansible playbooks written in?',
    options: ['JSON format', 'XML markup', 'Python code', 'YAML syntax'],
    correctAnswer: 3,
    explanation: 'Ansible playbooks are written in YAML, making them human-readable.',
    wrongFeedback: getRandomWrongFeedback(),
    xpReward: 10,
    tags: ['playbooks', 'syntax', 'basics'],
  },
  {
    id: 'ansible-3',
    levelId: 'ansible',
    difficulty: 'easy',
    question: 'What is an Ansible inventory?',
    options: [
      'A log of all executed tasks',
      'A backup of configurations',
      'A file defining managed hosts and groups',
      'A list of available modules',
    ],
    correctAnswer: 2,
    explanation: 'The inventory file defines the hosts and groups of hosts that Ansible will manage.',
    wrongFeedback: getRandomWrongFeedback(),
    xpReward: 10,
    tags: ['inventory', 'hosts', 'basics'],
  },
  {
    id: 'ansible-4',
    levelId: 'ansible',
    difficulty: 'easy',
    question: 'Which protocol does Ansible use to connect to remote hosts?',
    options: ['FTP protocol', 'Telnet protocol', 'SSH protocol', 'HTTP protocol'],
    correctAnswer: 2,
    explanation: 'Ansible uses SSH for Linux/Unix hosts and WinRM for Windows hosts.',
    wrongFeedback: getRandomWrongFeedback(),
    xpReward: 10,
    tags: ['connectivity', 'ssh', 'basics'],
  },
  {
    id: 'ansible-5',
    levelId: 'ansible',
    difficulty: 'easy',
    question: 'What is an Ansible module?',
    options: [
      'A YAML configuration file for playbooks',
      'A reusable code unit for specific tasks',
      'A type of inventory file format',
      'A centralized logging system tool',
    ],
    correctAnswer: 1,
    explanation: 'Modules are units of code Ansible executes. Examples include apt, yum, copy, file, and service.',
    wrongFeedback: getRandomWrongFeedback(),
    xpReward: 10,
    tags: ['modules', 'concepts', 'basics'],
  },
  {
    id: 'ansible-6',
    levelId: 'ansible',
    difficulty: 'medium',
    question: 'What does idempotency mean in Ansible?',
    options: [
      'Tasks always run in parallel',
      'Multiple runs produce the same result',
      'All task data is encrypted',
      'Playbooks are version controlled',
    ],
    correctAnswer: 1,
    explanation: 'Idempotency means running the same operation multiple times has the same effect as running it once.',
    wrongFeedback: getRandomWrongFeedback(),
    xpReward: 20,
    tags: ['concepts', 'best-practices', 'intermediate'],
  },
  {
    id: 'ansible-7',
    levelId: 'ansible',
    difficulty: 'medium',
    question: 'What is an Ansible role?',
    options: [
      'A user permission level in Ansible',
      'Reusable organized playbook components',
      'A special type of variable declaration',
      'A remote connection method type',
    ],
    correctAnswer: 1,
    explanation: 'Roles organize playbooks and related files into reusable components.',
    wrongFeedback: getRandomWrongFeedback(),
    xpReward: 20,
    tags: ['roles', 'organization', 'intermediate'],
  },
  {
    id: 'ansible-8',
    levelId: 'ansible',
    difficulty: 'medium',
    question: 'How do you define a variable in an Ansible playbook?',
    code: '# Define a variable named "app_port"',
    options: [
      'set app_port = 8080',
      'vars:\\n  app_port: 8080',
      'variable app_port: 8080',
      '$app_port = 8080',
    ],
    correctAnswer: 1,
    explanation: 'Variables are defined under the vars: section using YAML key-value syntax.',
    wrongFeedback: getRandomWrongFeedback(),
    xpReward: 20,
    tags: ['variables', 'syntax', 'intermediate'],
  },
  {
    id: 'ansible-9',
    levelId: 'ansible',
    difficulty: 'medium',
    question: 'What is the purpose of handlers in Ansible?',
    options: [
      'To handle errors in playbooks gracefully',
      'To run tasks only when notified by others',
      'To manage SSH connection configurations',
      'To parse and validate inventory files',
    ],
    correctAnswer: 1,
    explanation: 'Handlers are special tasks that run only when notified, typically for restarting services after config changes.',
    wrongFeedback: getRandomWrongFeedback(),
    xpReward: 20,
    tags: ['handlers', 'tasks', 'intermediate'],
  },
  {
    id: 'ansible-10',
    levelId: 'ansible',
    difficulty: 'medium',
    question: 'Which command runs a playbook in check mode (dry run)?',
    options: [
      'ansible-playbook playbook.yml --dry-run',
      'ansible-playbook playbook.yml --check',
      'ansible-playbook playbook.yml --test',
      'ansible-playbook playbook.yml --simulate',
    ],
    correctAnswer: 1,
    explanation: 'The --check flag runs the playbook in check mode, showing what would change without making actual changes.',
    wrongFeedback: getRandomWrongFeedback(),
    xpReward: 20,
    tags: ['commands', 'testing', 'intermediate'],
  },
  {
    id: 'ansible-11',
    levelId: 'ansible',
    difficulty: 'medium',
    question: 'What is Ansible Vault used for?',
    options: [
      'Storing playbook backups securely',
      'Encrypting sensitive data like passwords',
      'Managing Docker container deployments',
      'Version control for all playbooks',
    ],
    correctAnswer: 1,
    explanation: 'Ansible Vault encrypts sensitive data within playbooks and variable files.',
    wrongFeedback: getRandomWrongFeedback(),
    xpReward: 20,
    tags: ['vault', 'security', 'intermediate'],
  },
  {
    id: 'ansible-12',
    levelId: 'ansible',
    difficulty: 'hard',
    question: 'What is the correct way to use a Jinja2 template?',
    code: '# Deploy a config file from template',
    options: [
      'copy: src=template.conf dest=/etc/app.conf',
      'template: src=app.conf.j2 dest=/etc/app.conf',
      'file: template=app.conf path=/etc/app.conf',
      'jinja: input=app.conf output=/etc/app.conf',
    ],
    correctAnswer: 1,
    explanation: 'The template module processes Jinja2 templates (.j2) and copies them with variables substituted.',
    wrongFeedback: getRandomWrongFeedback(),
    xpReward: 35,
    tags: ['templates', 'jinja2', 'advanced'],
  },
  {
    id: 'ansible-13',
    levelId: 'ansible',
    difficulty: 'hard',
    question: 'How do you loop over a list of items in an Ansible task?',
    code: '# Install multiple packages',
    options: [
      'foreach: packages',
      'loop: "{{ packages }}"',
      'iterate: packages',
      'for item in packages:',
    ],
    correctAnswer: 1,
    explanation: 'The loop keyword iterates over a list, making each item available as {{ item }}.',
    wrongFeedback: getRandomWrongFeedback(),
    xpReward: 35,
    tags: ['loops', 'iteration', 'advanced'],
  },
  {
    id: 'ansible-14',
    levelId: 'ansible',
    difficulty: 'hard',
    question: 'What differs between "include_tasks" and "import_tasks"?',
    options: [
      'No difference, they are just aliases',
      'include is dynamic (runtime), import is static',
      'include for roles, import for playbooks only',
      'import_tasks is deprecated and removed',
    ],
    correctAnswer: 1,
    explanation: 'import_tasks is static (parse time), include_tasks is dynamic (runtime), affecting conditionals and loops.',
    wrongFeedback: getRandomWrongFeedback(),
    xpReward: 35,
    tags: ['includes', 'imports', 'advanced'],
  },
  {
    id: 'ansible-15',
    levelId: 'ansible',
    difficulty: 'hard',
    question: 'How do you run a task only on specific hosts?',
    options: [
      'hosts: specific_host at play level',
      'when: inventory_hostname == "specific_host"',
      'target: specific_host in the task block',
      'Both A and B can work depending on context',
    ],
    correctAnswer: 3,
    explanation: 'Use "hosts:" at play level, or "when:" conditions with inventory_hostname at task level.',
    wrongFeedback: getRandomWrongFeedback(),
    xpReward: 35,
    tags: ['targeting', 'conditionals', 'advanced'],
  },
  {
    id: 'ansible-16',
    levelId: 'ansible',
    difficulty: 'hard',
    question: 'What does "gather_facts: false" do in a playbook?',
    options: [
      'Disables all variable collection globally',
      'Skips system info gathering to speed execution',
      'Prevents any logging of task output data',
      'Disables error reporting for all tasks',
    ],
    correctAnswer: 1,
    explanation: 'gather_facts: false skips the setup module, speeding up execution when system facts aren\'t needed.',
    wrongFeedback: getRandomWrongFeedback(),
    xpReward: 35,
    tags: ['facts', 'optimization', 'advanced'],
  },
  {
    id: 'ansible-17',
    levelId: 'ansible',
    difficulty: 'hard',
    question: 'How do you register the output of a task?',
    code: '- name: Check service status\\n  command: systemctl status nginx',
    options: [
      'output: nginx_status',
      'register: nginx_status',
      'save_result: nginx_status',
      'store: nginx_status',
    ],
    correctAnswer: 1,
    explanation: 'The register keyword captures task output for use in subsequent tasks.',
    wrongFeedback: getRandomWrongFeedback(),
    xpReward: 35,
    tags: ['register', 'variables', 'advanced'],
  },
  {
    id: 'ansible-18',
    levelId: 'ansible',
    difficulty: 'evil',
    question: 'Playbook works locally but "Permission denied" in CI with become: yes. Issue?',
    options: [
      'Wrong Python version in CI environment',
      'Missing NOPASSWD in sudoers for CI user',
      'SSH key is not found on CI runner host',
      'Inventory file has a YAML syntax error',
    ],
    correctAnswer: 1,
    explanation: 'become: yes needs sudo. In CI, configure NOPASSWD or provide become_pass.',
    wrongFeedback: getRandomWrongFeedback(),
    xpReward: 50,
    tags: ['debugging', 'ci-cd', 'evil'],
  },
  {
    id: 'ansible-19',
    levelId: 'ansible',
    difficulty: 'evil',
    question: 'How would you structure Ansible for 500+ servers across dev, staging, prod?',
    options: [
      'One playbook with all tasks in a single file',
      'Separate inventory, roles, and group_vars per env',
      'Separate Git repository for each individual server',
      'Shell scripts instead â€” Ansible doesn\'t scale well',
    ],
    correctAnswer: 1,
    explanation: 'Best practice: inventory per env, roles for components, group_vars for env config, Galaxy for reusable roles.',
    wrongFeedback: getRandomWrongFeedback(),
    xpReward: 50,
    tags: ['architecture', 'interview', 'evil'],
  },
  {
    id: 'ansible-20',
    levelId: 'ansible',
    difficulty: 'evil',
    question: '"changed_when: false" task still reports changed. Cause?',
    options: [
      'Syntax error in the playbook YAML file',
      'A handler was notified by the task result',
      'Module doesn\'t respect changed_when override',
      'changed_when only works in check mode runs',
    ],
    correctAnswer: 2,
    explanation: 'Some modules (command/shell) always report changed. If changed_when doesn\'t work, the module may have issues.',
    wrongFeedback: getRandomWrongFeedback(),
    xpReward: 50,
    tags: ['debugging', 'modules', 'evil'],
  },
  {
    id: 'ansible-21',
    levelId: 'ansible',
    difficulty: 'medium',
    question: 'What is the default location for the Ansible inventory file?',
    options: [
      '/etc/ansible/hosts',
      '/var/ansible/inventory',
      '~/.ansible/inventory',
      '/opt/ansible/hosts',
    ],
    correctAnswer: 0,
    explanation: '/etc/ansible/hosts is the default. You can specify a different file with -i flag.',
    wrongFeedback: getRandomWrongFeedback(),
    xpReward: 20,
    tags: ['inventory', 'configuration', 'intermediate'],
  },
  {
    id: 'ansible-22',
    levelId: 'ansible',
    difficulty: 'medium',
    question: 'How do you limit playbook execution to a specific group?',
    options: [
      'ansible-playbook site.yml -g webservers',
      'ansible-playbook site.yml --limit webservers',
      'ansible-playbook site.yml --group webservers',
      'ansible-playbook site.yml --only webservers',
    ],
    correctAnswer: 1,
    explanation: 'The --limit flag restricts execution to specific hosts or groups.',
    wrongFeedback: getRandomWrongFeedback(),
    xpReward: 20,
    tags: ['commands', 'execution', 'intermediate'],
  },
  {
    id: 'ansible-23',
    levelId: 'ansible',
    difficulty: 'hard',
    question: 'What is the purpose of "block" in Ansible?',
    options: [
      'To comment out tasks in playbooks',
      'To group tasks with common attributes/rescue',
      'To define reusable function blocks',
      'To create parallel execution groups',
    ],
    correctAnswer: 1,
    explanation: 'Blocks group tasks for common properties and enable error handling with rescue/always.',
    wrongFeedback: getRandomWrongFeedback(),
    xpReward: 35,
    tags: ['blocks', 'error-handling', 'advanced'],
  },
  {
    id: 'ansible-24',
    levelId: 'ansible',
    difficulty: 'hard',
    question: 'How do you make a task fail gracefully?',
    options: [
      'continue_on_error: true',
      'ignore_errors: yes',
      'fail_safe: true',
      'catch_error: continue',
    ],
    correctAnswer: 1,
    explanation: 'ignore_errors: yes allows the playbook to continue even if the task fails.',
    wrongFeedback: getRandomWrongFeedback(),
    xpReward: 35,
    tags: ['error-handling', 'execution', 'advanced'],
  },
  {
    id: 'ansible-25',
    levelId: 'ansible',
    difficulty: 'evil',
    question: 'Playbook too slow for 1000 servers. Best optimizations?',
    options: [
      'Run everything on a faster control node',
      'Increase forks, pipelining, disable gather_facts',
      'Split into 1000 separate individual playbooks',
      'Use Ansible Tower only, CLI doesn\'t scale',
    ],
    correctAnswer: 1,
    explanation: 'Increase forks, enable pipelining, disable unnecessary facts, use async and strategy: free.',
    wrongFeedback: getRandomWrongFeedback(),
    xpReward: 50,
    tags: ['performance', 'scaling', 'evil'],
  },
];